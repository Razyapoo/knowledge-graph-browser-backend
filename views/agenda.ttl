@prefix view: <https://linked.opendata.cz/ontology/view#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/> .
@prefix a: <https://slovník.gov.cz/agendový/104/pojem/> .


<https://martin.necasky.solid.community/profile/kgbrowser/configuration1> a view:Configuration ;
  view:hasView <https://martin.necasky.solid.community/profile/kgbrowser/views/agenda1>, <https://martin.necasky.solid.community/profile/kgbrowser/views/agenda2> . 

<https://martin.necasky.solid.community/profile/kgbrowser/views/agenda1> a view:View ;
  dct:title "Agenda se svými ohlašovateli a vykonavateli"@cs ;
  view:endpointurl "http://rpp-opendata.egon.gov.cz/odrpp/sparql" ;
  view:condition """PREFIX l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/> 
PREFIX a: <https://slovník.gov.cz/agendový/104/pojem/>
ASK {
  ?node a l:agenda .    
}"""; 
  view:expansion """PREFIX l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/> 
PREFIX a: <https://slovník.gov.cz/agendový/104/pojem/>

CONSTRUCT {
  ?node l:má-název-agendy ?nazev ;
    l:má-kód-agendy ?kod .
  
  ?ohlasovatel l:ohlašuje-agendu ?node .
  
  ?vykonavatel l:vykonává-agendu ?node .
} WHERE {
  ?node l:má-název-agendy ?nazev ; 
    l:má-kód-agendy ?kod .
  FILTER (LANG(?nazev) = "cs")
  
  ?ohlasovatel l:ohlašuje-agendu ?node .
  
  ?vykonavatel l:vykonává-agendu ?node . 
}""" ;
  view:detail """PREFIX l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/> 
PREFIX a: <https://slovník.gov.cz/agendový/104/pojem/>
PREFIX v: <https://martin.necasky.solid.community/profile/kgbrowser/vocabulary/>

SELECT {
  ?node l:má-název-agendy ?nazev ;
    l:má-kód-agendy ?kod ;
    v:má-počet-vykonavatelů ?pocetVykonavatelu .
} WHERE {
  ?node l:má-název-agendy ?nazev ; 
    l:má-kód-agendy ?kod .
  FILTER (LANG(?nazev) = "cs")

  {
    SELECT (COUNT(*) AS ?pocetVykonavatelu)
    WHERE {
      ?vykonavatel l:vykonává-agendu ?node .
    }
  }   
}""" .


<https://martin.necasky.solid.community/profile/kgbrowser/views/agenda2> a view:View ;
  dct:title "Agenda a činnosti v ní vykonávané"@cs ;
  view:endpointurl "http://rpp-opendata.egon.gov.cz/odrpp/sparql" ;
  view:condition """PREFIX l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/> 
PREFIX a: <https://slovník.gov.cz/agendový/104/pojem/>
ASK {
  ?node a l:agenda .    
}"""; 
  view:expansion """PREFIX l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/> 
PREFIX a: <https://slovník.gov.cz/agendový/104/pojem/>

CONSTRUCT {
  ?node l:má-název-agendy ?nazev ;
    l:má-kód-agendy ?kod .
  
  ?cinnost l:je-vykonávána-v-agendě ?node .
} WHERE {
  ?node l:má-název-agendy ?nazev ; 
    l:má-kód-agendy ?kod .
  FILTER (LANG(?nazev) = "cs")
  
  ?cinnost l:je-vykonávána-v-agendě ?node .
}""" ;
  view:detail """PREFIX l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/> 
PREFIX a: <https://slovník.gov.cz/agendový/104/pojem/>
PREFIX v: <https://martin.necasky.solid.community/profile/kgbrowser/vocabulary/>

CONSTRUCT {
  ?node l:má-název-agendy ?nazev ;
    l:má-kód-agendy ?kod ;
    v:má-počet-činností ?pocetCinnosti .    
} WHERE {
  ?node l:má-název-agendy ?nazev ; 
    l:má-kód-agendy ?kod .
  FILTER (LANG(?nazev) = "cs")

  {
    SELECT (COUNT(*) AS ?pocetCinnosti)
    WHERE {
      ?cinnost l:je-vykonávána-v-agendě ?node .
    }
  }   
}""" .

<https://martin.necasky.solid.community/profile/kgbrowser/vocabulary/má-počet-činností> a owl:DatatypeProperty ;
  rdfs:label "má počet činností"@cs ;
  rdfs:domain l:agenda ;
  rdfs:range rdfs:Literal .
  
<https://martin.necasky.solid.community/profile/kgbrowser/vocabulary/má-počet-vykonavatelů> a owl:DatatypeProperty ;
  rdfs:label "má počet vykonavatelů"@cs ;
  rdfs:domain l:agenda ;
  rdfs:range rdfs:Literal . 