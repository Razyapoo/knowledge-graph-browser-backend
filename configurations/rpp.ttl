@prefix browser: <https://linked.opendata.cz/ontology/knowledge-graph-browser/> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix void: <http://rdfs.org/ns/void#> .
@prefix l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/> .
@prefix a: <https://slovník.gov.cz/agendový/104/pojem/> .

#####################################
# Configurations
#####################################

<https://linked.opendata.cz/resource/knowledge-graph-browser/configuration/rpp> a browser:Configuration ;
  dct:title "Konfigurace procházení registru práv a povinností"@cs ;
  browser:hasViewSet <https://linked.opendata.cz/resource/knowledge-graph-browser/view-set/rpp/agenda>,
    <https://linked.opendata.cz/resource/knowledge-graph-browser/view-set/rpp/ovm> .

#####################################
# ViewSets
#####################################
  
<https://linked.opendata.cz/resource/knowledge-graph-browser/view-set/rpp/agenda> a browser:ViewSet ;
  dct:title "Pohledy na agendy při procházení registru práv a povinností"@cs ;
  browser:hasView <https://linked.opendata.cz/resource/knowledge-graph-browser/view/rpp/struktura-agendy>, <https://linked.opendata.cz/resource/knowledge-graph-browser/view/rpp/výkon-agendy> ;
  browser:hasDefaultView <https://linked.opendata.cz/resource/knowledge-graph-browser/view/rpp/struktura-agendy> ;
  browser:hasCondition """PREFIX l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/>
ASK {
  ?node a l:agenda .    
}""" ;
  browser:hasDataset <https://linked.opendata.cz/resource/knowledge-graph-browser/dataset/rpp> .

<https://linked.opendata.cz/resource/knowledge-graph-browser/view-set/rpp/ovm> a browser:ViewSet ;
  dct:title "Pohledy na orgány veřejné moci při procházení registru práv a povinností"@cs ;
  browser:hasView <https://linked.opendata.cz/resource/knowledge-graph-browser/view/rpp/agendy-ovm> ;
  browser:hasDefaultView <https://linked.opendata.cz/resource/knowledge-graph-browser/view/rpp/agendy-ovm> ;
  browser:hasCondition """PREFIX l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/>
ASK {
  ?node a l:orgán-veřejné-moci .    
}""" ;
  browser:hasDataset <https://linked.opendata.cz/resource/knowledge-graph-browser/dataset/rpp> .

#####################################
# Views
#####################################
  
<https://linked.opendata.cz/resource/knowledge-graph-browser/view/rpp/struktura-agendy> a browser:View ;
  dct:title "Struktura agendy"@cs ;
  dct:description "Pohled na agendu zobrazující její strukturu. Struktura agendy je tvořena činnostmi, které jsou v rámci agendy vykonávány a ohlašovatelem agendy."@cs ;
  browser:hasExpansion <https://linked.opendata.cz/resource/knowledge-graph-browser/expansion-query/rpp/činnosti-a-ohlašovatel-agendy> ;
  browser:hasPreview <https://linked.opendata.cz/resource/knowledge-graph-browser/preview-query/rpp/název-agendy> ;
  browser:hasDetail <https://linked.opendata.cz/resource/knowledge-graph-browser/detail-query/rpp/agenda-se-statistikou> .
  
<https://linked.opendata.cz/resource/knowledge-graph-browser/view/rpp/výkon-agendy> a browser:View ;
  dct:title "Výkon agendy"@cs ;
  dct:description "Pohled na agendu zobrazující výkon agendy. Výkon agendy ukazuje k agendě orgány veřejné moci a soukromoprávní uživatele údajů, kteří agendu vykonávají."@cs ;
  browser:hasExpansion <https://linked.opendata.cz/resource/knowledge-graph-browser/expansion-query/rpp/vykonavatelé-agendy> ;
  browser:hasPreview <https://linked.opendata.cz/resource/knowledge-graph-browser/preview-query/rpp/název-agendy> ;
  browser:hasDetail <https://linked.opendata.cz/resource/knowledge-graph-browser/detail-query/rpp/agenda> .

<https://linked.opendata.cz/resource/knowledge-graph-browser/view/rpp/agendy-ovm> a browser:View ;
  dct:title "Agendy orgánu veřejné moci"@cs ;
  dct:description "Pohled na orgán veřejné moci tvořený ohlášenými a vykonávanými agendami."@cs ;
  browser:hasExpansion <https://linked.opendata.cz/resource/knowledge-graph-browser/expansion-query/rpp/ohlašované-a-vykonávané-agendy> ;
  browser:hasPreview <https://linked.opendata.cz/resource/knowledge-graph-browser/preview-query/rpp/název-ovm> ;
  browser:hasDetail <https://linked.opendata.cz/resource/knowledge-graph-browser/detail-query/rpp/ovm> .
  
#####################################
# Queries
#####################################

<https://linked.opendata.cz/resource/knowledge-graph-browser/expansion-query/rpp/činnosti-a-ohlašovatel-agendy> a browser:ExpansionQuery ;
  dct:title "Činnosti vykonávané v agendě a ohlašovatel agendy" ;
  browser:hasDataset <https://linked.opendata.cz/resource/knowledge-graph-browser/dataset/rpp> ;
  browser:query """PREFIX l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/> 

CONSTRUCT {
  ?cinnost l:je-vykonávána-v-agendě ?node .
  ?ovm l:ohlašuje-agendu ?node .
} WHERE {
  ?cinnost l:je-vykonávána-v-agendě ?node .
  ?ovm l:ohlašuje-agendu ?node .
}""" .

<https://linked.opendata.cz/resource/knowledge-graph-browser/expansion-query/rpp/vykonavatelé-agendy> a browser:ExpansionQuery ;
  dct:title "Vykonavatelé agendy" ;
  browser:hasDataset <https://linked.opendata.cz/resource/knowledge-graph-browser/dataset/rpp> ;
  browser:query """PREFIX l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/> 

CONSTRUCT {
  ?vykonavatel l:vykonává-agendu ?node .
} WHERE {  
  ?vykonavatel l:vykonává-agendu ?node . 
}""" .

<https://linked.opendata.cz/resource/knowledge-graph-browser/expansion-query/rpp/ohlašované-a-vykonávané-agendy> a browser:ExpansionQuery ;
  dct:title "Ohlášené a vykonávané agendy" ;
  browser:hasDataset <https://linked.opendata.cz/resource/knowledge-graph-browser/dataset/rpp> ;
  browser:query """PREFIX l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/> 

CONSTRUCT {
  ?node l:ohlašuje-agendu ?ohlasena-agenda ;
    l:vykonává-agendu ?vykonavana-agenda .
} WHERE {
  ?node l:ohlašuje-agendu ?ohlasena-agenda ;
    l:vykonává-agendu ?vykonavana-agenda .
}""" .

<https://linked.opendata.cz/resource/knowledge-graph-browser/preview-query/rpp/název-agendy> a browser:PreviewQuery ;
  dct:title "Název agendy" ;
  browser:hasDataset <https://linked.opendata.cz/resource/knowledge-graph-browser/dataset/rpp> ;
  browser:query """PREFIX l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/> 
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

CONSTRUCT {
  ?node a l:agenda ;
    rdfs:label ?label .
} WHERE {
  ?node l:má-název-agendy ?nazev ; 
    l:má-kód-agendy ?kod .
  FILTER (LANG(?nazev) = "cs")
  
  BIND(CONCAT(?kod, " - ", ?nazev) AS ?label) 
}""" .

<https://linked.opendata.cz/resource/knowledge-graph-browser/detail-query/rpp/agenda> a browser:DetailQuery ;
  dct:title "Základní detail agendy s názvem a kódem" ;
  browser:hasDataset <https://linked.opendata.cz/resource/knowledge-graph-browser/dataset/rpp> ;
  browser:query """PREFIX l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/> 

CONSTRUCT {
  ?node l:má-název-agendy ?nazev ;
    l:má-kód-agendy ?kod .
} WHERE {
  ?node l:má-název-agendy ?nazev ; 
    l:má-kód-agendy ?kod .
  FILTER (LANG(?nazev) = "cs")   
}""" .

<https://linked.opendata.cz/resource/knowledge-graph-browser/detail-query/rpp/agenda-se-statistikou> a browser:DetailQuery ;
  dct:title "Detail agendy se statistikou" ;
  browser:hasDataset <https://linked.opendata.cz/resource/knowledge-graph-browser/dataset/rpp> ;
  browser:query """PREFIX l: <https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/> 
PREFIX v: <https://linked.opendata.cz/vocabulary/knowledge-graph-browser/rpp/>

CONSTRUCT {
  ?node l:má-název-agendy ?nazev ;
    l:má-kód-agendy ?kod ;
    v:má-počet-vykonavatelů ?pocetVykonavatelu ;
    v:má-počet-činností ?pocetCinnosti .
} WHERE {
  ?node l:má-název-agendy ?nazev ; 
    l:má-kód-agendy ?kod .
  FILTER (LANG(?nazev) = "cs")

  {
    SELECT (COUNT(*) AS ?pocetVykonavatelu)
    WHERE {
      ?vykonavatel l:vykonává-agendu ?node .
    }
  }
  
  {
    SELECT (COUNT(*) AS ?pocetCinnosti)
    WHERE {
      ?cinnost l:je-vykonávána-v-agendě ?node .
    }
  }    
}""" . 


#####################################
# Datasets
#####################################

<https://linked.opendata.cz/resource/knowledge-graph-browser/dataset/rpp> a void:Dataset ;
  dct:title "Registr práv a povinností" ;
  void:sparqlEndpoint <http://rpp-opendata.egon.gov.cz/odrpp/sparql> .

#####################################
# View vocabularies
#####################################
  
<https://linked.opendata.cz/vocabulary/knowledge-graph-browser/rpp/má-počet-vykonavatelů> a owl:DatatypeProperty ;
  rdfs:label "má počet vykonavatelů"@cs ;
  rdfs:domain l:agenda ;
  rdfs:range rdfs:Literal .
  
<https://linked.opendata.cz/vocabulary/knowledge-graph-browser/rpp/má-počet-činností> a owl:DatatypeProperty ;
  rdfs:label "má počet činností"@cs ;
  rdfs:domain l:agenda ;
  rdfs:range rdfs:Literal .

#####################################
# Visual properties
#####################################
  
<https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/agenda> browser:background-color "lightskyblue" ;
  browser:border-color "navy" ;
  browser:color "black" ;
  browser:shape "rectangle" ;
  browser:emoji "&#128451;" .
  
<https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/ohlašuje-agendu> browser:border-color "lime" ;
  browser:color "black" .
  
<https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/vykonává-agendu> browser:border-color "tomato" ;
  browser:color "black" .
  
<https://slovník.gov.cz/legislativní/sbírka/111/2009/pojem/je-vykonávána-v-agendě> browser:border-color "orchid" ;
  browser:color "black" .